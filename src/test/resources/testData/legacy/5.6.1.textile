h2. Changes with Gentics Content.Node 5.6.1

endprologue.

----

WARNING: *Manual Change* Possible Root elements of tagtypes changed.

The tags 'p' and 'h1' - 'h6' are now recognized as valid root elements of tagtypes.
When using tagtypes with such root elements before, the tags where wrapped into a 'div' tag, which no longer will happen after this change.

----

WARNING: *Manual Change* (when updating to Aloha Editor with jQuery UI)

The GCN Intergration Plugin now supports the use of page object handlers as the
legacy version of this plugin did.  The API has remained the same except for
one significant change: Registered page object handler callbacks will receive a
GCN.PageAPI page object rather than a plain-old-object.

It might also be helpful to note that the page object you receive in the
handler function allows you to inspect exactly what data of the page object
will be sent to the server in the save process (since for efficiency, only
changes are send to the server during saving, and not the entire page data as
in the legacy plugin).  This introspection can be done using page.json().
Beware however that the returned object is only useful for introspection and
not reflection.  IE: Changing properties of the object returned by page.json()
will not mutate the page object itself, this must done via the page object's
API.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Clicking publish from the page preview would result in an JavaScript error. Fixed.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

This error was only caused it the Aloha Editor undo-plugin was active.

Fixes GenticsContentPortlet in frontend editing szenario

The backend path can differ between backend and
frontend mode. There was no way to configure this
in the implementation, since the gcn library is
loaded dynamically by the gcn-plugin, and the
gcn-plugin loads the page when it is initialized.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

The gcn linkbrowser button was not visible by default when the __aloha_jqueryui__ feature was enabled. 

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed dom-to-xhtml serialization.

This fix applies to any serialization function set with
Aloha.Editable.setContentSerializer().

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed opening a page in preview mode locks page and saving a page doesn't unlock it.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

The vertical scrollbar within the page editing view will now be shown. Previously the scrollbar was hidden when using Mozilla Firefox.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

A bug in the Gentics Content.Node JavaScript API was fixed. Previously saving an external link resulted in a javascript error although the link was saved successfully.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

A javascript error was fixed that occured when editing a page that contained template tags that contained references to page tags. This fix only applies when the feature __aloha_jqueryui__ was enabled.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

A javascript error was fixed that occured when clicking on the taglist menuentry while editing a page in aloha. This fix only applies when the feature __aloha_jqueryui__ was enabled.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed the __Cannot determine__ construct messages. Previously a bug caused the activation of this alert message box. This fix only applies when the feature __aloha_jqueryui__ was enabled.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed a bug in the GCN Integration Plugin that resulted in editables that were
inside block elements from being Alohafied when a page is loaded for editing.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed a bug in the GCN JS API in which block tags which only contained an
editable would not be properly converted into <node *> notation during the
encoding process.  The underling problem was that the blocks which only
contained editables were not being considered as blocks when they should have
been.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

The additional aloha-block classes will no longer be generated by Content.Node. Previously block elements that saved the classes in a tagpart would receive additional block classes for each editing process. 

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

The aloha-block classes will now be removed by the Gentics Content.Node Aloha Integeration Plugin. Previously the classes were saved.

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed possible Internal Error due to a database lock when importing page variants that all link to other objects (in content tags or in object properties).

----

h4. !images/changelog_types/bugfix_24.png! *Bugfix*

Fixed inserting tags when using Aloha Editor: The tags will now be inserted at the correct position in the DOM (if possible), respecting the html5 specification.

----

NOTE: This Gentics Content.Node version includes the "Aloha Editor 0.21.2 - 2012/08/16":https://github.com/alohaeditor/Aloha-Editor/blob/alohaeditor-0.21.2/CHANGELOG.md and "Aloha Editor 0.20.22 - 2012/08/16":https://github.com/alohaeditor/Aloha-Editor/blob/alohaeditor-0.20.22/CHANGELOG.md  

----